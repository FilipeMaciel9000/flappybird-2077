<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Flappy Bird com est√©tica Cyberpunk no navegador web."
    />
    <meta name="author" content="Filipe Maciel" />
    <meta name="keywords" content="flappy bird, game, cyberpunk, 2077, jogo" />
    <link
      rel="icon"
      href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;üê¶&lt;/text&gt;&lt;/svg&gt;"
    />
    <title>Flappy Bird 2077 - Cyberpunk Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap');

      :root {
        --neon-cyan: #00f3ff;
        --neon-pink: #ff2a6d;
        --neon-green: #00ff9d;
        --neon-light-green: #00ffcc;
        --dark-bg: #0f0e17;
        --darker-bg: #1a1a2e;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: 'Orbitron', sans-serif;
        background-color: var(--dark-bg);
        overflow: hidden;
        margin: 0;
        padding: 0;
        color: var(--neon-cyan);
        text-shadow: 0 0 5px var(--neon-cyan);
        user-select: none;
        touch-action: manipulation;
        min-height: 100vh;
      }

      #gameContainer {
        position: relative;
        width: 90vw;
        max-width: 400px;
        height: 80vh;
        max-height: 600px;
        margin: 20px auto;
        background-color: var(--darker-bg);
        border: 3px solid var(--neon-cyan);
        box-shadow: 0 0 20px var(--neon-cyan), inset 0 0 10px var(--neon-cyan);
        overflow: hidden;
        aspect-ratio: 2/3;
      }

      .city-background {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 50%;
        background-image: url('./assets/images/neoncity.png');
        background-size: cover;
        background-position: center bottom;
        background-repeat: no-repeat;
        z-index: 1;
        pointer-events: none;
        /* Otimiza√ß√£o para movimento suave */
        will-change: transform;
        /* Efeito de parallax */
        transform: translateZ(-1px) scale(1.1);
      }

      #bird {
        position: absolute;
        width: 8%;
        min-width: 40px;
        height: 8%;
        min-height: 40px;
        background-image: url('./assets/images/flappybird.png');
        background-size: contain;
        background-repeat: no-repeat;
        top: 50%;
        left: 25%;
        transform: translateY(-50%);
        transition: transform 0.2s ease;
        z-index: 10;
        /* Otimiza√ß√£o para movimento suave */
        will-change: transform;
      }

      .pipe {
        position: absolute;
        width: 15%;
        min-width: 60px;
        background: linear-gradient(
          to right,
          var(--neon-green),
          var(--neon-light-green)
        );
        box-shadow: 0 0 10px var(--neon-green), 0 0 20px rgba(0, 255, 157, 0.5);
        border: 2px solid var(--neon-light-green);
        z-index: 2;
        /* Otimiza√ß√£o para movimento suave */
        will-change: transform;
      }

      #score {
        position: absolute;
        top: 5%;
        width: 100%;
        text-align: center;
        font-size: clamp(16px, 5vw, 24px);
        font-weight: bold;
        z-index: 100;
        transition: all 0.3s ease;
      }

      #gameOver {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(15, 14, 23, 0.9);
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 200;
      }

      #startScreen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(15, 14, 23, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 200;
      }

      .neon-text {
        color: var(--neon-cyan);
        text-shadow: 0 0 5px var(--neon-cyan), 0 0 10px var(--neon-cyan);
        animation: flicker 1.5s infinite alternate;
      }

      @keyframes flicker {
        0%,
        19%,
        21%,
        23%,
        25%,
        54%,
        56%,
        100% {
          text-shadow: 0 0 5px var(--neon-cyan), 0 0 10px var(--neon-cyan),
            0 0 15px var(--neon-cyan);
        }
        20%,
        24%,
        55% {
          text-shadow: none;
        }
      }

      .glow-button {
        background: transparent;
        color: var(--neon-cyan);
        border: 2px solid var(--neon-cyan);
        padding: 10px 20px;
        margin-top: 20px;
        font-family: 'Orbitron', sans-serif;
        font-size: clamp(14px, 3vw, 16px);
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px var(--neon-cyan);
        outline: none;
        position: relative;
        overflow: hidden;
      }

      .glow-button:hover {
        background: var(--neon-cyan);
        color: var(--dark-bg);
        box-shadow: 0 0 20px var(--neon-cyan);
      }

      .glow-button:active {
        transform: scale(0.95);
      }

      .glow-button::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          to bottom right,
          transparent,
          transparent,
          transparent,
          rgba(0, 243, 255, 0.3),
          transparent,
          transparent,
          transparent
        );
        transform: rotate(30deg);
        animation: buttonGlow 3s linear infinite;
      }

      @keyframes buttonGlow {
        0% {
          transform: rotate(30deg) translate(-30%, -30%);
        }
        100% {
          transform: rotate(30deg) translate(30%, 30%);
        }
      }

      .scanline {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          to bottom,
          rgba(0, 243, 255, 0.05) 0%,
          rgba(0, 243, 255, 0) 10%
        );
        background-size: 100% 4px;
        pointer-events: none;
        animation: scanline 8s linear infinite;
        z-index: 50;
      }

      @keyframes scanline {
        0% {
          background-position: 0 0;
        }
        100% {
          background-position: 0 100%;
        }
      }

      .grid-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(
            rgba(0, 243, 255, 0.1) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
        pointer-events: none;
        z-index: 5;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(0, 243, 255, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(0, 243, 255, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(0, 243, 255, 0);
        }
      }

      .neon-pulse {
        animation: neon-pulse 1.5s infinite alternate;
      }

      @keyframes neon-pulse {
        from {
          opacity: 0.7;
        }
        to {
          opacity: 1;
        }
      }

      /* Efeito de glitch ocasional */
      .glitch {
        animation: glitch 1s linear infinite;
      }

      @keyframes glitch {
        0% {
          transform: translate(0);
        }
        20% {
          transform: translate(-2px, 2px);
        }
        40% {
          transform: translate(-2px, -2px);
        }
        60% {
          transform: translate(2px, 2px);
        }
        80% {
          transform: translate(2px, -2px);
        }
        100% {
          transform: translate(0);
        }
      }

      /* Pr√©-carregamento de imagens */
      .preloader {
        position: absolute;
        width: 0;
        height: 0;
        overflow: hidden;
        z-index: -1;
      }

      /* Responsividade melhorada */
      @media (max-width: 768px) {
        h1 {
          font-size: clamp(1.5rem, 8vw, 2.5rem);
          margin-bottom: 2vh;
        }

        #gameContainer {
          height: 70vh;
        }

        #startScreen h2,
        #gameOver h2 {
          font-size: clamp(1.5rem, 6vw, 2rem);
        }

        #startScreen p {
          font-size: clamp(0.8rem, 3vw, 1rem);
          margin-bottom: 4vh;
        }
      }

      @media (max-height: 600px) {
        #gameContainer {
          height: 65vh;
        }
      }
    </style>
  </head>
  <body class="flex flex-col items-center justify-center min-h-screen">
    <!-- Pr√©-carregamento de imagens -->
    <div class="preloader">
      <img src="./assets/images/flappybird.png" alt="Preload Bird" />
      <img src="./assets/images/neoncity.png" alt="Preload City" />
    </div>

    <h1 class="neon-text text-4xl mb-4">FLAPPY BIRD 2077</h1>

    <div id="gameContainer" class="relative">
      <div class="scanline"></div>
      <div class="grid-overlay"></div>
      <div class="city-background"></div>

      <div id="bird"></div>
      <div id="score">0</div>

      <div id="gameOver">
        <h2 class="neon-text text-3xl mb-4">GAME OVER</h2>
        <p class="neon-text mb-6">SCORE: <span id="finalScore">0</span></p>
        <button id="restartButton" class="glow-button pulse">
          <i class="fas fa-sync-alt mr-2"></i>RESTART
        </button>
      </div>

      <div id="startScreen">
        <h2 class="neon-text text-3xl mb-6 neon-pulse">FLAPPY BIRD 2077</h2>
        <p class="neon-text mb-8 text-center px-4">
          Navigate the neon-lit pipes of Night City
        </p>
        <button id="startButton" class="glow-button pulse">
          <i class="fas fa-play mr-2"></i>START
        </button>
        <div class="mt-8 text-xs neon-text opacity-70">
          <p>SPACE or CLICK to jump</p>
          <p class="mt-2">Avoid the pipes</p>
        </div>
      </div>
    </div>

    <div class="mt-8 text-xs neon-text opacity-50">
      <p>¬© FILIPE MACIEL GAMES CORP</p>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Elementos do DOM
        const gameContainer = document.getElementById('gameContainer');
        const bird = document.getElementById('bird');
        const scoreElement = document.getElementById('score');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const restartButton = document.getElementById('restartButton');
        const startScreen = document.getElementById('startScreen');
        const startButton = document.getElementById('startButton');

        // Configura√ß√µes do jogo
        const config = {
          gravity: 0.5,
          jumpForce: -10,
          gameSpeed: 2,
          pipeGap: 150,
          pipeWidth: 60,
          pipeFrequency: 1500,
          bird: {
            width: 0,
            height: 0,
            startX: 0,
            startY: 0,
          },
        };

        // Estado do jogo
        let state = {
          gameRunning: false,
          score: 0,
          velocity: 0,
          birdPosition: 0,
          pipes: [],
          lastPipeTime: 0,
          animationId: null,
          difficultyIncreaseInterval: 5,
          highScore: localStorage.getItem('flappyBird2077HighScore') || 0,
          assetsLoaded: false,
        };

        // Pr√©-carrega as imagens
        function preloadAssets() {
          return new Promise((resolve) => {
            const birdImg = new Image();
            const cityImg = new Image();

            birdImg.src = './assets/images/flappybird.png';
            cityImg.src = './assets/images/neoncity.png';

            let loaded = 0;
            const total = 2;

            const checkLoaded = () => {
              loaded++;
              if (loaded === total) {
                state.assetsLoaded = true;
                resolve();
              }
            };

            birdImg.onload = checkLoaded;
            cityImg.onload = checkLoaded;
            birdImg.onerror = checkLoaded; // Continua mesmo se houver erro
            cityImg.onerror = checkLoaded; // Continua mesmo se houver erro
          });
        }

        // Inicializa√ß√£o
        async function init() {
          await preloadAssets();
          updateConfigDimensions();
          resetGame();
          setupEventListeners();
          window.addEventListener('resize', updateConfigDimensions);

          // Mostra tela de in√≠cio ap√≥s carregar
          if (state.assetsLoaded) {
            startScreen.style.display = 'flex';
          }
        }

        // Atualiza dimens√µes quando o container muda de tamanho
        function updateConfigDimensions() {
          const birdSize = Math.min(
            gameContainer.offsetWidth * 0.08,
            gameContainer.offsetHeight * 0.08
          );
          bird.style.width = `${birdSize}px`;
          bird.style.height = `${birdSize}px`;

          config.bird.width = birdSize;
          config.bird.height = birdSize;
          config.bird.startX = gameContainer.offsetWidth * 0.25;
          config.bird.startY = gameContainer.offsetHeight * 0.5 - birdSize / 2;

          if (!state.gameRunning) {
            bird.style.top = `${config.bird.startY}px`;
          }
        }

        // Configura eventos
        function setupEventListeners() {
          startButton.addEventListener('click', startGame);
          restartButton.addEventListener('click', startGame);

          // Controles de teclado
          document.addEventListener('keydown', (e) => {
            if (!state.gameRunning && isJumpKey(e)) {
              startGame();
              return;
            }

            if (isJumpKey(e) && state.gameRunning) {
              jump();
            }
          });

          // Controle de toque/clique
          gameContainer.addEventListener('click', () => {
            if (!state.gameRunning) {
              startGame();
              return;
            }
            jump();
          });

          // Controles touch para dispositivos m√≥veis
          gameContainer.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (!state.gameRunning) {
              startGame();
              return;
            }
            jump();
          });
        }

        function isJumpKey(e) {
          return e.code === 'Space' || e.key === ' ' || e.key === 'ArrowUp';
        }

        // Pulo do p√°ssaro
        function jump() {
          state.velocity = config.jumpForce;
          bird.style.transform = 'rotate(-30deg)';

          // Efeito sonoro (simulado)
          playSoundEffect('jump');

          setTimeout(() => {
            bird.style.transform = 'rotate(0deg)';
          }, 300);
        }

        // Simula efeitos sonoros
        function playSoundEffect(type) {
          // Em um jogo real, voc√™ usaria arquivos de √°udio
          // Aqui √© apenas uma simula√ß√£o para o exemplo
          if (type === 'jump') {
            const oscillator = new AudioContext().createOscillator();
            const gainNode = new AudioContext().createGain();
            oscillator.connect(gainNode);
            gainNode.connect(new AudioContext().destination);
            oscillator.type = 'sine';
            oscillator.frequency.value = 800;
            gainNode.gain.exponentialRampToValueAtTime(
              0.00001,
              new AudioContext().currentTime + 0.5
            );
            oscillator.start();
            oscillator.stop(new AudioContext().currentTime + 0.5);
          } else if (type === 'score') {
            // Efeito para pontua√ß√£o
          } else if (type === 'gameOver') {
            // Efeito para game over
          }
        }

        // Inicia o jogo
        function startGame() {
          if (!state.assetsLoaded) return;

          if (state.animationId) {
            cancelAnimationFrame(state.animationId);
          }

          resetGame();
          updateConfigDimensions();

          gameOverScreen.style.display = 'none';
          startScreen.style.display = 'none';

          state.gameRunning = true;
          state.lastPipeTime = Date.now();
          gameLoop();
        }

        // Loop principal do jogo
        function gameLoop() {
          if (!state.gameRunning) return;

          const currentTime = Date.now();

          updateBird();

          if (checkBoundaryCollision()) {
            gameOver();
            return;
          }

          if (currentTime - state.lastPipeTime > config.pipeFrequency) {
            createPipe();
            state.lastPipeTime = currentTime;
          }

          updatePipes();

          state.animationId = requestAnimationFrame(gameLoop);
        }

        // Atualiza posi√ß√£o do p√°ssaro
        function updateBird() {
          state.velocity += config.gravity;
          state.birdPosition += state.velocity;
          bird.style.top = `${state.birdPosition}px`;
        }

        // Verifica colis√£o com teto ou ch√£o
        function checkBoundaryCollision() {
          return (
            state.birdPosition < 0 ||
            state.birdPosition > gameContainer.offsetHeight - config.bird.height
          );
        }

        // Cria um novo par de canos
        function createPipe() {
          const gapPosition =
            Math.random() *
              (gameContainer.offsetHeight - config.pipeGap - 100) +
            50;

          // Cano superior
          const upperPipe = createPipeElement(
            gameContainer.offsetWidth,
            0,
            gapPosition
          );

          // Cano inferior
          const lowerPipe = createPipeElement(
            gameContainer.offsetWidth,
            gapPosition + config.pipeGap,
            gameContainer.offsetHeight - gapPosition - config.pipeGap
          );

          addPipeDecoration(upperPipe, 'bottom');
          addPipeDecoration(lowerPipe, 'top');

          state.pipes.push({
            element: upperPipe,
            x: gameContainer.offsetWidth,
            width: upperPipe.offsetWidth,
            height: gapPosition,
            passed: false,
          });

          state.pipes.push({
            element: lowerPipe,
            x: gameContainer.offsetWidth,
            width: lowerPipe.offsetWidth,
            height: gameContainer.offsetHeight - gapPosition - config.pipeGap,
            passed: false,
          });
        }

        // Cria elemento de cano
        function createPipeElement(x, top, height) {
          const pipe = document.createElement('div');
          pipe.className = 'pipe';
          pipe.style.left = `${x}px`;
          pipe.style.top = `${top}px`;
          pipe.style.height = `${height}px`;
          gameContainer.appendChild(pipe);
          return pipe;
        }

        // Adiciona decora√ß√£o aos canos
        function addPipeDecoration(pipe, position) {
          const decor = document.createElement('div');
          decor.style.position = 'absolute';
          decor.style[position] = '0';
          decor.style.left = '0';
          decor.style.width = '100%';
          decor.style.height = '10px';
          decor.style.background = `linear-gradient(to right, 
            var(--neon-light-green), 
            var(--neon-cyan),
            var(--neon-light-green))`;
          decor.style.boxShadow = '0 0 5px var(--neon-light-green)';
          pipe.appendChild(decor);
        }

        // Atualiza posi√ß√£o dos canos e verifica colis√µes
        function updatePipes() {
          for (let i = 0; i < state.pipes.length; i++) {
            const pipe = state.pipes[i];
            pipe.x -= config.gameSpeed;
            pipe.element.style.left = `${pipe.x}px`;

            if (checkPipeCollision(pipe, i)) {
              gameOver();
              return;
            }

            updateScore(pipe, i);

            if (pipe.x + pipe.width < 0) {
              pipe.element.remove();
              state.pipes.splice(i, 1);
              i--;
            }
          }
        }

        // Verifica colis√£o com cano
        function checkPipeCollision(pipe, index) {
          const birdRight = config.bird.startX + config.bird.width;
          const birdBottom = state.birdPosition + config.bird.height;
          const pipeRight = pipe.x + pipe.width;

          if (config.bird.startX < pipeRight && birdRight > pipe.x) {
            if (index % 2 === 0 && state.birdPosition < pipe.height) {
              return true;
            }
            if (
              index % 2 === 1 &&
              birdBottom > gameContainer.offsetHeight - pipe.height
            ) {
              return true;
            }
          }
          return false;
        }

        // Atualiza pontua√ß√£o
        function updateScore(pipe, index) {
          if (
            index % 2 === 0 &&
            !pipe.passed &&
            pipe.x + pipe.width < config.bird.startX
          ) {
            pipe.passed = true;
            state.score++;
            scoreElement.textContent = state.score;

            // Efeito sonoro
            playSoundEffect('score');

            if (state.score % state.difficultyIncreaseInterval === 0) {
              increaseDifficulty();
            }

            animateScore();
          }
        }

        // Aumenta dificuldade
        function increaseDifficulty() {
          config.gameSpeed += 0.5;
          config.pipeFrequency = Math.max(800, config.pipeFrequency - 100);

          // Efeito visual
          gameContainer.style.boxShadow = `0 0 30px var(--neon-cyan)`;
          setTimeout(() => {
            gameContainer.style.boxShadow = `0 0 20px var(--neon-cyan)`;
          }, 300);
        }

        // Anima√ß√£o do score
        function animateScore() {
          scoreElement.style.transform = 'scale(1.5)';
          scoreElement.style.color = 'var(--neon-pink)';
          setTimeout(() => {
            scoreElement.style.transform = 'scale(1)';
            scoreElement.style.color = 'var(--neon-cyan)';
          }, 300);
        }

        // Fim de jogo
        function gameOver() {
          state.gameRunning = false;
          cancelAnimationFrame(state.animationId);

          // Efeito sonoro
          playSoundEffect('gameOver');

          // Atualiza high score
          if (state.score > state.highScore) {
            state.highScore = state.score;
            localStorage.setItem('flappyBird2077HighScore', state.highScore);
          }

          // Adiciona high score √† tela de game over
          finalScoreElement.innerHTML = `${state.score}<br><span class="text-sm">HIGH SCORE: ${state.highScore}</span>`;

          // Efeito de glitch
          gameOverScreen.classList.add('glitch');
          setTimeout(() => {
            gameOverScreen.classList.remove('glitch');
          }, 1000);

          gameOverScreen.style.display = 'flex';
        }

        // Reseta o jogo
        function resetGame() {
          state = {
            ...state,
            gameRunning: false,
            score: 0,
            velocity: 0,
            birdPosition: config.bird.startY,
            pipes: [],
            lastPipeTime: 0,
            animationId: null,
          };

          scoreElement.textContent = '0';
          bird.style.top = `${config.bird.startY}px`;
          bird.style.transform = 'rotate(0deg)';

          document.querySelectorAll('.pipe').forEach((pipe) => pipe.remove());
        }

        // Efeito de grade animada
        setInterval(() => {
          const grid = document.querySelector('.grid-overlay');
          grid.style.backgroundPosition = `${Math.random() * 20}px ${
            Math.random() * 20
          }px`;
        }, 100);

        // Inicializa o jogo
        init();
      });
    </script>
  </body>
</html>
